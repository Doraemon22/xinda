<!DOCTYPE html>
<html lang="en"  xmlns:th="http://www.thymeleaf.org">

<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Document</title>
<link rel="stylesheet" href="/css/public.css">
<link rel="stylesheet" href="/css/header.css">
<link rel="stylesheet" href="/css/operator_expenses.css">
<link rel="stylesheet" href="/css/font-awesome.min.css">
<link rel="stylesheet" href="/css/element-ui_2.12.0.css">

<script src="/js/jquery-3.4.1.min.js"></script>
<script>
	$(
			function() {
				var pcount = $('#pageCount').val();
				var psize = $('#pageSize').val();
				var pstart = $('#pageStart').val();
				var buy_time = $('#buy_time').val();
				var price = $('#price').val();
				var nowpage = pstart / psize + 1;
				//alert(pstart);
				var cpage = Math.ceil(pcount / psize);
				var strhtml = "";
				if (cpage <= 10) {
					for (var i = 1; i <= cpage; i++) {
						if (i == nowpage) {
							strhtml += '<a href=/feiyong?pageStart=' + psize
									* (i - 1) + '&buy_name=' + buy_name
									+ ' style="background-color:#aaaaaa">' + i
									+ '</a>';
						} else {
							strhtml += '<span> <a href=/feiyong?pageStart='
									+ psize * (i - 1) + '&buy_name=' + buy_name
									+ '>' + i + '</a></span>';
						}
					}
				} else if (cpage > 10 && 1 <= nowpage && nowpage <= 6) { //pagestart=20 nowpage=11 cpage=15
					//alert("111111===" + nowpage);
					for (var i = 1; i <= 10; i++) {
						if (i == nowpage) {
							strhtml += '<a href=/feiyong?pageStart='
									+ psize
									* (i - 1)
									+ '&buy_name='
									+ buy_name
									+ ' style="background-color:#aaaaaa;font-weight:700">'
									+ i + '</a>';
							//strhtml+='<a href=/userAll?pageStart='+psize*(i-1)+' style="background-color:#aaaaaa"><div class="nowpage">'+i+'</div></a>';
						} else {
							strhtml += '<span> <a href=/feiyong?pageStart='
									+ psize * (i - 1) + '&buy_name=' + buy_name
									+ '>' + i + '</a></span>';
						}
					}
				} else if (cpage > 10 && nowpage <= cpage - 4) {
					//alert("222222===" + nowpage);
					for (var i = nowpage - 5; i <= nowpage + 4; i++) {//6--15
						if (i == nowpage) {
							strhtml += '<a href=/feiyong?pageStart='
									+ psize
									* (i - 1)
									+ '&buy_name'
									+ buy_name
									+ ' style="background-color:#aaaaaa;font-weight:700">'
									+ i + '</a>';
						} else {
							strhtml += '<span><a href=/feiyong?pageStart='
									+ psize * (i - 1) + '&buy_name' + buy_name
									+ '>' + i + '</a></span>';
						}
					}
				} else if (cpage > 10 && cpage - 4 < nowpage
						&& nowpage <= cpage) {
					//alert("333333===" + nowpage);
					for (var i = cpage - 9; i <= cpage; i++) {
						if (i == nowpage) {
							strhtml += '<a href=/feiyong?pageStart='
									+ psize
									* (i - 1)
									+ '&buy_name='
									+ buy_name
									+ ' style="background-color:#aaaaaa;font-weight:700">'
									+ i + '</a>';
						} else {
							strhtml += '<span> <a href=/feiyong?pageStart='
									+ psize * (i - 1) + '&buy_name=' + buy_name
									+ '>' + i + '</a></span>';
						}
					}
				} else {
					console.error(00000000);
				}
				$("#mydiv").html(strhtml);

			})();
</script>
</head>

<body>
	<div class="header">
		<div class="logo_info">
			<img src="/images/logo.png" alt="logo"> <span
				class="platform_name">信达</span>
		</div>
		<ul class="user_info">
			<li><a th:href="@{/findOperByname}"><i
					class="fa fa-cog fa-fw"></i>服务管理</a></li>
			<li><i class="fa fa-cube fa-fw"></i>业务管理</li>
			<li><img src="/images/default_user.png"> <span>用户名字</span>
				<i class="fa fa-chevron-down fa-fw user-arrow-down"></i>
				<ul class="dropdown">
					<li>更改信息</li>
					<li>退出登录</li>
				</ul></li>
		</ul>
	</div>
	<div class="main">
		<ul class="main-nav">
			<li><a href="/findOperByno"> <i
					class="fa fa-shopping-cart fa-fw"></i>
					<p>订单</p>
			</a></li>
			<li><a th:href="@{/findOperByusername}"><i
					class="fa fa-user fa-fw"></i>
					<p>用户</p> </a></li>
			<li><a th:href="@{/findByServicename}"><i
					class="fa fa-tasks fa-fw"></i>
					<p>服务商</p> </a></li>
			<li class="bg-red"><a th:href  = "@{/feiyong}"> <i
					class="fa fa-cny fa-fw"></i>
					<p>费用中心</p>
			</a></li>
			<li><a th:href="@{/findByRecommendname}"> <i
					class="fa fa-star fa-fw"></i>
					<p>优质推荐</p>
			</a></li>
			<!-- <li><a href="#"> <i class="fa fa-bar-chart-o fa-fw"></i>
					<p>统计分析</p>
			</a></li> -->
		</ul>
		<ul class="main-details">
			<div class="main-top">
				<ul>
					<li><i class="fa fa-home fa-fw"></i></li>
					<li>费用中心</li>
					<li>/</li>
					<li>支付中心</li>
				</ul>
			</div>
			<ul class="main-tab">
				<li class="border-red business-order">支付中心</li>
			</ul>
			<ul class="main-content">
				<ul class="search">
					<li><p class="jintian-btn ">今天</p></li>
					<li><p class="qitian-btn ">近七天</p></li>
					<li><p class="yiyue-btn ">近一个月</p></li>
					<!-- <li><p class="feiyong-btn ">全部</p></li> -->
				</ul>
				<h3>
					交易总金额 <span class="font-red">¥
						<td th:text="${price}"></td>
					</span>

				</h3>
			</ul>
			<input type="hidden" th:value="${pageCount}" id="pageCount" />
			<input type="hidden" th:value="${pageSize}" id="pageSize" />
			<input type="hidden" th:value="${pageStart}" id="pageStart" />
			<div th:if="${expence==null}">
				<h3 style="margin-left: 30px; margin-top: 20px"></h3>
			</div>
			<div th:if="${expence!=null}">
				<table border="0" cellspacing="0" cellpadding="0">
					<thead>
						<tr>
							<th width="100">购买用户</th>
							<th width="100">购买时间</th>
							<th width="200">业务订单号</th>
							<th width="300">金额</th>
							<th width="80">支付方式</th>
							<th width="500">购买内容</th>
						</tr>
					</thead>
					<tbody>

						<tr th:each="expence:${expence}">
							<td th:text="${expence.eId}"></td>
							<td th:text="${expence.createTime}"></td>
							<td th:text="${expence.businessNo}"></td>
							<td th:text="${expence.totalPrice}"></td>
							<td th:text="${expence.payType}"></td>
							<td th:text="${expence.orderInfo}"></td>
						</tr>
					</tbody>
				</table>
				<div class="center"
					th:with="pageNext=${pageStart}+${pageSize},
	pagePre=${pageStart}-${pageSize},
	pageL=${pageCount}-(${pageCount}%${pageSize})">
					<ul class="pagination">
						<li><span><a
								th:href="@{${feiyong} + '?pageStart='+0+'&create_time='+${create_time}}">首页</a></span></li>
						<li><span th:if="${pagePre} ge '0'"><a
								th:href="@{${feiyong} + '?pageStart='+${pagePre}+'&create_time='+${create_time}}">上页</a></span></li>
						<li><div id="mydiv"></div></li>
						<li><span th:if="${pageNext} lt ${pageCount}"><a
								th:href="@{${feiyong} + '?pageStart='+${pageNext}+'&create_time='+${create_time}}">下页</a></span></li>
						<li><span><a
								th:href="@{${feiyong} + '?pageStart='+${pageL}+'&create_time='+${create_time}}">末页</a></span></li>
					</ul>
				</div>




				<div class="main-sercive">结算中心...</div>
			</div>
	</div>
	<script src="/js/operator_expenses.js"></script>
</body>

</html>